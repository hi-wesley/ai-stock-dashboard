{"ast":null,"code":"// core/services/stock.service.ts\nimport { HttpParams } from '@angular/common/http';\nimport { map } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let StockService = /*#__PURE__*/(() => {\n  class StockService {\n    constructor(http) {\n      this.http = http;\n    }\n    /** New helper that talks to the /api/chart route */\n    getChart(symbol, range, interval) {\n      const params = new HttpParams({\n        fromObject: {\n          symbol,\n          range,\n          interval\n        }\n      });\n      return this.http.get(`/api/chart`, {\n        params\n      }).pipe(map(resp => {\n        // flatten the Yahoo chart payload into your PricePoint[]\n        const ts = resp.chart.result[0].timestamp;\n        const ohlc = resp.chart.result[0].indicators.quote[0];\n        return ts.map((t, i) => ({\n          date: new Date(t * 1000),\n          open: ohlc.open[i],\n          high: ohlc.high[i],\n          low: ohlc.low[i],\n          close: ohlc.close[i]\n        }));\n      }));\n    }\n    static {\n      this.ɵfac = function StockService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || StockService)(i0.ɵɵinject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: StockService,\n        factory: StockService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return StockService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}